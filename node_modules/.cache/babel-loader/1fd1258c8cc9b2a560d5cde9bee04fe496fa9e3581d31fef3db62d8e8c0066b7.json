{"ast":null,"code":"var _jsxFileName = \"E:\\\\1\\\\curswork\\\\curswork\\\\src\\\\containers\\\\Home.tsx\";\nimport './Home.scss';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport Calculator from '../components/Calculator';\nimport { ClassPicker } from '../components/ClassPicker';\nimport { classByName, classById } from '../data/classes';\nimport { setClass, setPoints } from '../store/calculator/actions';\nimport { decodeKnownTalents, encodeKnownTalents } from '../lib/tree';\nimport classNames from 'classnames';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class Home extends React.PureComponent {\n  get classSlug() {\n    return classById[this.props.classId] && classById[this.props.classId].name.toLowerCase();\n  }\n  componentDidMount() {\n    this.loadFromUrlParams();\n  }\n  componentDidUpdate(prevProps) {\n    const prevParams = prevProps.match.params;\n    const {\n      params\n    } = this.props.match;\n    if (prevParams.selectedClass !== params.selectedClass) {\n      // Class changed in route\n      this.loadFromUrlParams();\n    } else if (this.props.classId) {\n      // Changes within same class\n      if (prevParams.pointString !== params.pointString) {\n        // Same class but point string changed\n        const decoded = decodeKnownTalents(params.pointString || '', this.props.classId);\n        if (!this.props.points.equals(decoded)) {\n          this.props.setPoints(decoded);\n        }\n      } else if (prevProps.points !== this.props.points) {\n        // Points map changed, update the URL\n        this.updateURL(this.props.points);\n      }\n    }\n  }\n  componentWillUnmount() {\n    this.props.setClass(null);\n  }\n  loadFromUrlParams() {\n    const {\n      selectedClass,\n      pointString\n    } = this.props.match.params;\n    const c = selectedClass && classByName[selectedClass];\n    if (c) {\n      const points = pointString && decodeKnownTalents(pointString || '', c.id);\n      this.props.setClass(c.id, points);\n    } else {\n      this.props.setClass(null);\n      this.props.history.replace('/');\n    }\n  }\n  updateURL(points) {\n    const {\n      classId\n    } = this.props;\n    const pointsString = encodeKnownTalents(points, classId);\n    if (pointsString !== this.props.match.params.pointString) {\n      this.props.history.replace(`/${this.classSlug}` + (pointsString ? `/${pointsString}` : ''));\n    }\n  }\n  render() {\n    const {\n      match,\n      classId\n    } = this.props;\n    const {\n      selectedClass\n    } = match.params;\n    const currentClass = classById[classId];\n    if (classId && !currentClass) {\n      // We're redirecting to /\n      return null;\n    }\n    const classPickerCn = classNames('home__class-picker', {\n      'home__class-picker--highlight': !selectedClass\n    });\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"home\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classPickerCn,\n          children: [!selectedClass && /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"home__class-picker-title\",\n            children: \"Choose a class\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ClassPicker, {\n            center: true,\n            selected: selectedClass\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), currentClass && /*#__PURE__*/_jsxDEV(Calculator, {\n          classId: classId,\n          points: this.props.points\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this);\n  }\n}\nHome.whyDidYouRender = true;\nexport default connect(({\n  calculator\n}) => ({\n  classId: calculator.classId,\n  points: calculator.points\n}), {\n  setClass,\n  setPoints\n})(Home);","map":{"version":3,"names":["React","connect","Calculator","ClassPicker","classByName","classById","setClass","setPoints","decodeKnownTalents","encodeKnownTalents","classNames","jsxDEV","_jsxDEV","Home","PureComponent","classSlug","props","classId","name","toLowerCase","componentDidMount","loadFromUrlParams","componentDidUpdate","prevProps","prevParams","match","params","selectedClass","pointString","decoded","points","equals","updateURL","componentWillUnmount","c","id","history","replace","pointsString","render","currentClass","classPickerCn","className","children","fileName","_jsxFileName","lineNumber","columnNumber","center","selected","whyDidYouRender","calculator"],"sources":["E:/1/curswork/curswork/src/containers/Home.tsx"],"sourcesContent":["import './Home.scss'\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { match } from 'react-router-dom'\nimport { RouteComponentProps } from 'react-router'\nimport Calculator from '../components/Calculator'\nimport { ClassPicker } from '../components/ClassPicker'\nimport { classByName, classById } from '../data/classes'\nimport { AppState } from '../store'\nimport { setClass, setPoints } from '../store/calculator/actions'\nimport { Points } from '../store/calculator/types'\nimport { decodeKnownTalents, encodeKnownTalents } from '../lib/tree'\nimport classNames from 'classnames'\n\n\ninterface Props extends RouteComponentProps {\n  match: match<{ \n    selectedClass: string\n    pointString: string\n  }>\n  classId: number\n  points: Points\n  setClass: typeof setClass\n  setPoints: typeof setPoints\n}\n\nexport class Home extends React.PureComponent<Props> {\n  static whyDidYouRender = true\n\n  get classSlug() {\n    return classById[this.props.classId] && classById[this.props.classId].name.toLowerCase()\n  }\n\n  componentDidMount() {\n    this.loadFromUrlParams()\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    const prevParams = prevProps.match.params\n    const { params } = this.props.match\n\n    if (prevParams.selectedClass !== params.selectedClass) {\n      // Class changed in route\n      this.loadFromUrlParams()\n    } else if (this.props.classId) {\n      // Changes within same class\n      if (prevParams.pointString !== params.pointString) {\n        // Same class but point string changed\n        const decoded = decodeKnownTalents(params.pointString || '', this.props.classId)\n        if (!this.props.points.equals(decoded)) {\n          this.props.setPoints(decoded)\n        }\n      } else if (prevProps.points !== this.props.points) {\n        // Points map changed, update the URL\n        this.updateURL(this.props.points)\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.setClass(null)\n  }\n\n  loadFromUrlParams() {\n    const { selectedClass, pointString } = this.props.match.params\n    const c = selectedClass && classByName[selectedClass]\n    if (c) {\n      const points = pointString && decodeKnownTalents(pointString || '', c.id)\n      this.props.setClass(c.id, points)\n    } else {\n      this.props.setClass(null)\n      this.props.history.replace('/')\n    }\n  }\n\n  updateURL(points: Points) {\n    const { classId } = this.props\n    const pointsString = encodeKnownTalents(points, classId)\n    if (pointsString !== this.props.match.params.pointString) {\n      this.props.history.replace(`/${this.classSlug}` + (pointsString ? `/${pointsString}` : ''))\n    }\n  }\n\n  render() {\n    const { match, classId } = this.props\n    const { selectedClass } = match.params\n\n    const currentClass = classById[classId]\n    if (classId && !currentClass) {\n      // We're redirecting to /\n      return null\n    }\n\n    const classPickerCn = classNames('home__class-picker', { \n      'home__class-picker--highlight': !selectedClass\n    })\n\n    return (\n      <div className=\"home\">\n        <div className=\"container\">\n          <div className={classPickerCn}>\n            {!selectedClass &&\n              <h3 className=\"home__class-picker-title\">Choose a class</h3>\n            }\n            <ClassPicker\n              center \n              selected={selectedClass} \n            />\n          </div>\n    \n          {currentClass && \n            <Calculator \n              classId={classId}\n              points={this.props.points}\n            />\n          }\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default connect(\n  ({ calculator }: AppState) => ({ \n    classId: calculator.classId,\n    points: calculator.points,\n  }),\n  { setClass, setPoints }\n)(Home);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}