{"ast":null,"code":"var _jsxFileName = \"E:\\\\1\\\\curswork\\\\curswork\\\\src\\\\components\\\\Icon.tsx\";\nimport './Icon.scss';\nimport React from 'react';\nimport classNames from 'classnames';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst NOT_FOUND_ICON = 'inv_misc_questionmark';\nconst makeUrl = (name, size, useFallback = false) => {\n  if (useFallback) {\n    return `https://wow.zamimg.com/images/wow/icons/${size}/${name}.jpg`;\n  }\n  return `${process.env.PUBLIC_URL}/images/icons/${size}/${name}.jpg`;\n};\nexport class Icon extends React.PureComponent {\n  constructor(...args) {\n    super(...args);\n    this.img = undefined;\n    this.state = {\n      fadeIn: false,\n      url: ''\n    };\n    this.loadImage = (icon, useFallback = false) => {\n      this.setState({\n        url: '',\n        fadeIn: false\n      });\n      const bgSize = this.props.size !== 'small' ? 'large' : 'medium';\n      const url = icon && makeUrl(icon, bgSize, useFallback);\n      if (!url) return;\n      if (this.img) {\n        this.img.onload = null;\n        this.img.onerror = null;\n        this.img.src = '';\n      }\n      const start = Date.now();\n      this.img = new Image();\n      this.img.onload = () => {\n        const loadTime = Date.now() - start;\n        this.setState({\n          url,\n          fadeIn: loadTime >= 300\n        });\n        this.img = undefined;\n      };\n      this.img.onerror = () => {\n        if (url.indexOf('wow.zamimg') === -1) {\n          this.loadImage(icon, true);\n        } else {\n          this.loadImage(NOT_FOUND_ICON);\n        }\n      };\n      this.img.src = url;\n    };\n  }\n  componentDidMount() {\n    this.loadImage(this.props.name);\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.name !== this.props.name) {\n      this.loadImage(this.props.name);\n    }\n  }\n  componentWillUnmount() {\n    if (this.img) {\n      this.img.onload = null;\n      this.img.onerror = null;\n      this.img.src = '';\n    }\n  }\n  render() {\n    const {\n      size,\n      golden,\n      className,\n      ...rest\n    } = this.props;\n    const {\n      fadeIn,\n      url\n    } = this.state;\n    const cn = classNames('icon', `icon--${size}`, className, {\n      'icon--golden': golden,\n      'icon--loaded': !!url,\n      'icon--fade-in': fadeIn\n    });\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: cn,\n      ...rest,\n      children: [url && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"icon__bg\",\n        style: {\n          backgroundImage: `url(${url})`\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"icon__frame\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), this.props.children]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this);\n  }\n}\nIcon.defaultProps = {\n  size: 'medium',\n  golden: false\n};","map":{"version":3,"names":["React","classNames","jsxDEV","_jsxDEV","NOT_FOUND_ICON","makeUrl","name","size","useFallback","process","env","PUBLIC_URL","Icon","PureComponent","constructor","args","img","undefined","state","fadeIn","url","loadImage","icon","setState","bgSize","props","onload","onerror","src","start","Date","now","Image","loadTime","indexOf","componentDidMount","componentDidUpdate","prevProps","componentWillUnmount","render","golden","className","rest","cn","children","style","backgroundImage","fileName","_jsxFileName","lineNumber","columnNumber","defaultProps"],"sources":["E:/1/curswork/curswork/src/components/Icon.tsx"],"sourcesContent":["import './Icon.scss'\nimport React from 'react'\nimport classNames from 'classnames'\n\ninterface Props {\n  name?: string\n  size?: 'small' | 'medium' | 'large'\n  golden?: boolean\n  className?: string\n}\n\nconst NOT_FOUND_ICON = 'inv_misc_questionmark'\n\nconst makeUrl = (name: string, size: string, useFallback = false): string => {\n  if (useFallback) {\n    return `https://wow.zamimg.com/images/wow/icons/${size}/${name}.jpg`\n  }\n  return `${process.env.PUBLIC_URL}/images/icons/${size}/${name}.jpg`\n}\n\nexport class Icon extends React.PureComponent<Props> {\n  static defaultProps = {\n    size: 'medium',\n    golden: false\n  }\n\n  img: HTMLImageElement = undefined\n\n  state = {\n    fadeIn: false,\n    url: ''\n  }\n\n  componentDidMount() {\n    this.loadImage(this.props.name)\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.name !== this.props.name) {\n      this.loadImage(this.props.name)\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.img) {\n      this.img.onload = null\n      this.img.onerror = null\n      this.img.src = '' \n    }\n  }\n\n  loadImage = (icon: string, useFallback = false): void => {\n    this.setState({ url: '', fadeIn: false })\n    const bgSize = this.props.size !== 'small' ? 'large' : 'medium'\n    const url = icon && makeUrl(icon, bgSize, useFallback)\n    if (!url) return\n\n    if (this.img) {\n      this.img.onload = null\n      this.img.onerror = null\n      this.img.src = '' \n    }\n\n    const start = Date.now()\n    this.img = new Image()\n    this.img.onload = () => {\n      const loadTime = Date.now() - start\n      this.setState({ url, fadeIn: loadTime >= 300 })\n      this.img = undefined\n    }\n    this.img.onerror = () => {\n      if (url.indexOf('wow.zamimg') === -1) {\n        this.loadImage(icon, true)\n      } else {\n        this.loadImage(NOT_FOUND_ICON)\n      }\n    }\n    this.img.src = url\n  }\n\n  render() {\n    const { size, golden, className, ...rest } = this.props\n    const { fadeIn, url } = this.state\n\n    const cn = classNames('icon', `icon--${size}`, className, {\n      'icon--golden': golden,\n      'icon--loaded': !!url,\n      'icon--fade-in': fadeIn,\n    })\n  \n    return (\n      <div className={cn} {...rest}>\n        {url && \n          <div className=\"icon__bg\" style={{ backgroundImage: `url(${url})` }} />\n        }\n        <div className=\"icon__frame\" />\n        {this.props.children}\n      </div>\n    )\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}